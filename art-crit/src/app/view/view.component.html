<mat-card (window:resize)="onResize($event)" *ngIf="!refresh">
  <div class="header">
      <h1>{{request.title}}</h1>
      <span> by {{request.requestedByUser}}</span>
  </div>
  
  <div class="container">
    <div class="imageContainer">
        <img #originalImage [src]="request.imageUrl" [style.opacity]="originalImageOpacity" (click)="clickedImage($event)">

        <div class="overlays" [style.height.px]="overlayDomInfo.height" [style.width.px]="overlayDomInfo.width" [style.top.px]="overlayDomInfo.top" (click)="clickedImage($event)">
            <div class="paintoverContainer" [style.width.px]="paintoverContainerWidth">
                <img *ngIf="selectedCritique?.paintoverUrl" [src]="selectedCritique?.paintoverUrl" class='paintover' [style.opacity]="overlayOpacity" [style.height.px]="overlayDomInfo.height" [style.width.px]="overlayDomInfo.width" />
            </div>

            <div class="box" *ngFor="let box of selectedCritique?.boxes" [style.left.px]="box.x" [style.opacity]="overlayOpacity" [style.top.px]="box.y" [style.width.px]="box.width" [style.height.px]="box.height"></div>
            <div class="indicator" *ngFor="let indicator of selectedCritique?.indicators" [style.opacity]="overlayOpacity" [style.left.px]="convertFullXToDisplayX(indicator.x)" [style.top.px]="convertFullYToDisplayY(indicator.y)">{{indicator.value}}</div>
          
        </div>
        
        <div class="imageControls">
            <mat-slider class="overlayWidth" *ngIf="selectedCritique?.paintoverUrl" id="paintoverSlider" min="0" max="100" value="100" tickInterval="1" (input)="paintoverSliderChanged($event)"></mat-slider><br/>

            Original image opacity: <mat-slider thumbLabel min="0" max="100" value="100" tickInterval="1" (input)="originalImageOpacityChanged($event)"></mat-slider><br/>
            Overlay opacity: <mat-slider thumbLabel min="0" max="100" value="100" tickInterval="1" (input)="overlayOpacityChanged($event)"></mat-slider>
        </div>
            
    </div>

    <div class="sidebar">
      <mat-card>
          <mat-card-title>Critiques</mat-card-title>
          <div *ngFor="let critique of request.critiques" class="critique" [class.selected]="critique.selected" (click)="clickedCritique(critique)">
              <span class='author'>{{critique.author}}</span> <span> {{critique.age}}</span>:
              <div [innerHTML]="formatCritiqueMessage(critique)"></div>
          </div>
      </mat-card>
      

    </div>
  </div>

  <div class="bottomArea">Bottom area</div>

</mat-card>
